<table mat-table [dataSource]="questions()" class="mat-elevation-z8">
  <ng-container matColumnDef="question">
    <th mat-header-cell *matHeaderCellDef>Question</th>
    <td mat-cell *matCellDef="let element">{{ element.question }}</td>
  </ng-container>

  <ng-container matColumnDef="answer">
    <th mat-header-cell *matHeaderCellDef>Answer</th>
    <td *matCellDef="let element" mat-cell>
      <mat-select
        [formControl]="formGroup.controls[element.question]"
        [matTooltip]="formGroup.controls[element.question].value">
        @for (answer of element.answers; track answer) {
          <mat-option [value]="answer">{{ answer }}</mat-option>
        }
      </mat-select>
    </td>
  </ng-container>

  <ng-container matColumnDef="correct">
    <th mat-header-cell *matHeaderCellDef>Correct?</th>
    <td mat-cell *matCellDef="let element">
      @if (checkResult()[element.question]) {
        @let check = checkResult()[element.question];
        <div class="check-container">
          @switch (check) {
            @case ('CORRECT') {
              <mat-icon class="correct">check_circle</mat-icon>
              <span>Correct!</span>
            }
            @case ('INCORRECT') {
              <mat-icon class="incorrect">cancel</mat-icon>
              <span>Incorrect!</span>
            }
            @case ('UNKNOWN') {
              <mat-icon class="UNKNOWN">error</mat-icon>
              <span>Unknown question. Please get a new list of questions.</span>
            }
          }
        </div>
      }
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="['question', 'answer', 'correct']"></tr>
  <tr mat-row *matRowDef="let _; columns: ['question', 'answer', 'correct']"></tr>
</table>

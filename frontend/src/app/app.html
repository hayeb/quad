<header><h2>OpenTrivia App</h2></header>

<div class="content-container">
  <div class="content">
    <div class="form-container">
      <app-questions-form (searchQuestions)="searchQuestions($event)" />
    </div>

    @let questionsState = questions();

    @switch (questionsState.kind) {
      @case ('IDLE') {
        Please use the form to search for questions
      }
      @case ('LOADING') {
        <div>
          <mat-spinner [mode]="'indeterminate'" />
          <span>Loading questions...</span>
        </div>
      }
      @case ('SUCCESS') {
        @let checksState = checks();
        <app-questions-table
          [questions]="questionsState.data"
          (answered)="updateAnswer($event)"
          [checks]="checksState.kind === 'SUCCESS' ? checksState.data : {}" />
        <button mat-stroked-button (click)="checkAnswers()" [disabled]="Object.keys(answers()).length === 0">
          Check answers
        </button>
      }
    }
  </div>
</div>
